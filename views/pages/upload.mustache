{{> header }}

<div class="container mt-5">
  <h2 class="mb-4">Upload Help File (TXT)</h2>

  <div class="alert alert-warning d-flex align-items-center" role="alert">
    <i class="fas fa-flask mr-2"></i>
    <strong>Beta Feature: </strong> This upload tool is in testing. Output may not be 100% accurate.
  </div>
  
  {{#success}}
  <div class="alert alert-success" role="alert">
    {{success}} <a href="/dashboard" class="ml-3 btn btn-sm btn-outline-primary">Back to Dashboard</a>
  </div>
  {{/success}}

  {{#error}}
  <div class="alert alert-danger" role="alert">
    {{error}} <a href="/dashboard" class="ml-3 btn btn-sm btn-outline-secondary">Back to Dashboard</a>
  </div>
  {{/error}}


  <form action="/api/files/upload-txt" method="POST" enctype="multipart/form-data">
    <div class="form-group mt-3">
      <label for="doc_id">Original DokuWiki URL or Doc ID <span class="text-danger">*</span></label>
      <input type="text" class="form-control" name="doc_id" id="doc_id" required 
        placeholder="E.g. https://www.simul8.com/support/help/doku.php?id=tips:copy OR tips:copy">
      <small class="form-text text-muted">
        Paste the full DokuWiki URL (preferred) or just the unique document ID (e.g. tips:copy). This ensures files are mapped correctly.
      </small>
    </div>

    <div class="form-group mt-3">
      <label for="file">Upload .txt File</label>
      <input type="file" class="form-control-file" name="file" id="file" accept=".txt" required>
    </div>

    <button type="submit" class="btn btn-primary mt-3">Upload</button>
    <a href="/dashboard" class="btn btn-secondary mt-3 ml-2">Cancel</a>
  </form>

</div>